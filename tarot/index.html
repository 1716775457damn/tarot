<!DOCTYPE html>
<html lang="en">

<head>

    <title>Tarot-o-bot</title>
    <meta name="description" content="Let our tarot-reader predict your digital future.">
    <meta property="og:locate" content="en_US" />
    <meta property="og:site_name" content="tarotobot.illo.tv" />
    <meta property="og:title" content="Tarot-o-bot" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="Let our tarot-reader predict your digital future." />
    <meta property="og:image" content="https://tarotobot.illo.tv/includes/images/OG/tarotobot.png" />
    <meta property="og:url" content="https://tarotobot.illo.tv/" />

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=1">

    <link rel="icon" href="./includes/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="./includes/images/favicon-32x32.png" type="image/png" sizes="32x32">
    <link rel="icon" href="./includes/images/favicon-16x16.png" type="image/png" sizes="16x16">

    <link rel="stylesheet" type="text/css" href="./includes/CSS/brillo7.css">
    <link rel="stylesheet" type="text/css" href="./includes/fonts/stylesheet.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- æœ¬åœ°é›†æˆï¼šç¡®ä¿è¡¨å•å¯äº¤äº’ï¼ˆé¿å…åŠ¨ç”»/ç²’å­å±‚é®æŒ¡ç‚¹å‡»ä¸è¾“å…¥ç„¦ç‚¹ï¼‰ -->
    <style>
        #anim_container,
        #particles-js {
            pointer-events: none;
        }

        #page0 {
            position: relative;
            z-index: 10;
        }
    </style>

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-MHMDVG6');</script>
    <!-- End Google Tag Manager -->

</head>

<body>

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MHMDVG6" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div id="anim_container"></div>

    <div id="particles-js"></div>

    <div class="icons" id="left_up">
        <img src="./includes/images/icon1_viola.gif" style="width: 100%;">
    </div>

    <div class="icons" id="left_bottom">
        <img src="./includes/images/icon2_viola.gif" style="width: 100%;">
    </div>

    <div class="icons" id="right_up">
        <img src="./includes/images/icon3_viola.gif" style="width: 100%;">
    </div>

    <div class="icons" id="right_bottom">
        <img src="./includes/images/icon4_viola.gif" style="width: 100%;">
    </div>

    <!-- æ–°å¢ï¼šç”¨æˆ·è¾“å…¥è¡¨å•é¡µé¢ -->
    <div id="page0" style="display: none; position: relative; z-index: 10;">
        <div class="main_content" id="p0_main_content" style="max-width: 700px; margin: 0 auto; padding: 60px 40px; background: rgba(0,0,0,0.7); border-radius: 20px; backdrop-filter: blur(10px); border: 2px solid rgba(197, 163, 216, 0.3); box-shadow: 0 8px 32px rgba(0,0,0,0.5);">
            <div class="main_text" style="margin-bottom: 40px; text-align: center; font-size: 2.5vw; color: #C5A3D8; text-shadow: 0 0 20px rgba(197, 163, 216, 0.5);">
                <span class="rainbow">ğŸ”® å‘½å…ƒå½•å…¥ ğŸ”®</span>
            </div>
            
            <div style="margin-bottom: 25px;">
                <label style="display: block; margin-bottom: 8px; color: #E6E6E6; font-size: 1.1vw; font-weight: bold;">å§“å</label>
                <input type="text" id="user_name" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" 
                    style="width: 100%; padding: 18px; background: rgba(255,255,255,0.1); border: 2px solid rgba(197, 163, 216, 0.4); color: #E6E6E6; font-size: 1.1vw; border-radius: 8px; font-family: inherit; transition: all 0.3s; box-sizing: border-box;">
            </div>
            
            <div style="margin-bottom: 25px;">
                <label style="display: block; margin-bottom: 8px; color: #E6E6E6; font-size: 1.1vw; font-weight: bold;">å‡ºç”Ÿæ—¥æœŸ</label>
                <div id="date_picker" style="width: 100%; padding: 20px; background: rgba(255,255,255,0.1); border: 2px solid rgba(197, 163, 216, 0.4); border-radius: 8px; box-sizing: border-box; display: flex; justify-content: space-around; align-items: center; position: relative;">
                    <!-- å¹´ä»½é€‰æ‹©å™¨ -->
                    <div class="picker-column" style="flex: 1; text-align: center;">
                        <div class="picker-label" style="color: #C5A3D8; font-size: 0.9vw; margin-bottom: 10px;">å¹´</div>
                        <div class="picker-wheel" id="year_picker" style="height: 200px; overflow: hidden; position: relative; cursor: grab;">
                            <div class="picker-items" id="year_items" style="transition: transform 0.3s ease-out;"></div>
                        </div>
                    </div>
                    <!-- æœˆä»½é€‰æ‹©å™¨ -->
                    <div class="picker-column" style="flex: 1; text-align: center;">
                        <div class="picker-label" style="color: #C5A3D8; font-size: 0.9vw; margin-bottom: 10px;">æœˆ</div>
                        <div class="picker-wheel" id="month_picker" style="height: 200px; overflow: hidden; position: relative; cursor: grab;">
                            <div class="picker-items" id="month_items" style="transition: transform 0.3s ease-out;"></div>
                        </div>
                    </div>
                    <!-- æ—¥æœŸé€‰æ‹©å™¨ -->
                    <div class="picker-column" style="flex: 1; text-align: center;">
                        <div class="picker-label" style="color: #C5A3D8; font-size: 0.9vw; margin-bottom: 10px;">æ—¥</div>
                        <div class="picker-wheel" id="day_picker" style="height: 200px; overflow: hidden; position: relative; cursor: grab;">
                            <div class="picker-items" id="day_items" style="transition: transform 0.3s ease-out;"></div>
                        </div>
                    </div>
                    <!-- é€‰ä¸­æŒ‡ç¤ºçº¿ -->
                    <div class="picker-mask" style="position: absolute; top: 50%; left: 0; right: 0; height: 50px; margin-top: -25px; pointer-events: none; border-top: 2px solid rgba(197, 163, 216, 0.5); border-bottom: 2px solid rgba(197, 163, 216, 0.5); background: rgba(197, 163, 216, 0.1);"></div>
                </div>
                <input type="hidden" id="user_birth" value="">
            </div>
            
            <div style="margin-bottom: 35px;">
                <label style="display: block; margin-bottom: 8px; color: #E6E6E6; font-size: 1.1vw; font-weight: bold;">æ‚¨æƒ³é—®çš„é—®é¢˜</label>
                <textarea id="user_question" rows="5" placeholder="ä¾‹å¦‚ï¼šæˆ‘ä»Šå¤©å»è°ˆå®¢æˆ·ï¼Œç©¿ä»€ä¹ˆé¢œè‰²çš„è¡£æœèƒ½æ—ºè´¢è¿ï¼Ÿ" 
                    style="width: 100%; padding: 18px; background: rgba(255,255,255,0.1); border: 2px solid rgba(197, 163, 216, 0.4); color: #E6E6E6; font-size: 1.1vw; border-radius: 8px; resize: vertical; font-family: inherit; transition: all 0.3s; box-sizing: border-box; min-height: 120px;"></textarea>
            </div>
            
            <div id="p0_enter_btn" class="brillo_btn" style="cursor: pointer; width: 100%; text-align: center; margin-top: 20px; background: linear-gradient(135deg, #C5A3D8 0%, #9B7BB8 100%); border: none; box-shadow: 0 4px 15px rgba(197, 163, 216, 0.4); transition: all 0.3s;">
                å¼€å§‹å åœ </br>
                <img src="./includes/images/arrow_left_grey.png" class="btn_icon">
            </div>
            
            <div id="p0_loading" style="display: none; margin-top: 25px; text-align: center; color: #FEB420; font-size: 1.2vw; animation: pulse 2s infinite;">
                <div style="margin-bottom: 10px;">ğŸ”®</div>
                æ­£åœ¨å‡†å¤‡å¡”ç½—ç‰Œ...
            </div>
        </div>
    </div>
    
    <style>
        /* è¾“å…¥æ¡†èšç„¦æ•ˆæœ */
        #page0 input:focus, #page0 textarea:focus {
            outline: none;
            border-color: #C5A3D8 !important;
            box-shadow: 0 0 15px rgba(197, 163, 216, 0.5) !important;
            background: rgba(255,255,255,0.15) !important;
        }
        
        /* æ—¥æœŸé€‰æ‹©å™¨æ ·å¼ */
        .picker-items {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .picker-item {
            height: 50px;
            line-height: 50px;
            font-size: 1.2vw;
            color: rgba(230, 230, 230, 0.5);
            transition: all 0.2s;
            user-select: none;
            min-width: 60px;
        }
        
        .picker-item.selected {
            color: #C5A3D8;
            font-size: 1.4vw;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(197, 163, 216, 0.5);
        }
        
        .picker-wheel {
            position: relative;
        }
        
        .picker-wheel::before,
        .picker-wheel::after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            height: 75px;
            pointer-events: none;
            z-index: 1;
        }
        
        .picker-wheel::before {
            top: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, transparent 100%);
        }
        
        .picker-wheel::after {
            bottom: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, transparent 100%);
        }
        
        .picker-wheel:active {
            cursor: grabbing;
        }
        
        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .picker-item {
                font-size: 16px;
            }
            .picker-item.selected {
                font-size: 18px;
            }
            .picker-label {
                font-size: 12px !important;
            }
            #date_picker {
                padding: 15px !important;
            }
            .picker-wheel {
                height: 150px !important;
            }
        }
        
        /* æŒ‰é’®æ‚¬åœæ•ˆæœ */
        #p0_enter_btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(197, 163, 216, 0.6) !important;
        }
        
        /* è„‰å†²åŠ¨ç”» */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        /* è¾“å…¥æ¡†å ä½ç¬¦æ ·å¼ */
        #page0 input::placeholder, #page0 textarea::placeholder {
            color: rgba(255,255,255,0.5);
        }
    </style>

    <div id="page1">

        <div id="title_colored">
            <img src="./includes/images/header.gif" id="header_gif">
        </div>

        <div class="vertical_container">
            <a href="https://illo.tv">
                <div id="left_link" class="vertical">illo.tv</div>
            </a>
        </div>

        <div class="vertical_container">
            <a href="./tarots/">
                <div id="right_link" class="vertical">The Tarots</div>
            </a>
        </div>

        <div id="bottom_link">

            <div id="join">Try our new Tarot-o-bot â€” Reboot!
            </div>

        </div>

        <div class="main_content" id="p1_main_content">

            <div class="main_text">Dear <span class="rainbow">Tarot-o-bot</span>, mother of tech updates and
                design trends,
                <u>what do you foresee for our future</u>?
            </div></br></br>
            <div id="p1_enter_btn" class="brillo_btn">
                Press Enter </br>
                <img src="./includes/images/arrow_left_grey.png" class="btn_icon">
            </div>

        </div>

    </div>


    <div id="page2">

        <div class="main_content" id="p2_main_content">
            <div class="main_text">

                <span style="color:#FEB420" class="rainbow">Brillo</span> is our traditional birthday party we do every
                other year: we call it Brillo because in Italian it means both â€œI sparkleâ€ and â€œdrunkâ€ â€” two perfect
                features for any <a href="https://illo.tv">illo.tv</a> party!
            </div></br></br></br>

            <div class="secondary_text">

                <span style="color:#FEB420"><a href="https://stories.illo.tv/brillo7-8aacccb682cc">Hereâ€™s a little recap
                        of the party.</a></span>

                </br></br>
            </div></br>

            <div class="secondary_text">

                Follow us on <a href="https://www.instagram.com/illotv/">Instagram</a> and be the first to know about
                our next party!

            </div></br></br></br>

            <div class="secondary_text">

                As seen on the news:<br>
                <a
                    href="https://www.commarts.com/webpicks/tarot-o-bot?utm_source=Communication+Arts+Daily&utm_campaign=f8a66ea1ff-RSS_EMAIL_CAMPAIGN&utm_medium=email&utm_term=0_a6a0e887e3-f8a66ea1ff-36437509">Communication
                    Arts</a> â€” <a href="https://thefwa.com/article/insights-tarot-o-bot">FWA</a> â€” Web Designer Magazine
                â€” <a
                    href="https://www.frizzifrizzi.it/2019/07/17/tarot-o-bot-predice-il-futuro-dellindustria-creativa/">Frizzifrizzi</a>
                â€” <a href="https://www.feeldesain.com/illo-studio-prediction-generator.html">Feel Desain</a> â€” <a
                    href="https://hoppipolla.it/blog/qual-e-il-futuro-dellindustria-creativa/?fbclid=IwAR2F8t32GMY6b2yjSQeJb7-twFB0zRurTEHywE-hayVSk9fMNIxwUJNwn5w">HoppÃ¬polla</a>
                â€” <a href="https://www.awwwards.com/sites/tarot-o-bot">Awwwards</a> â€” <a
                    href="https://www.cssdesignawards.com/sites/tarot-o-bot/35481/">CSS Design Awards</a> â€” <a
                    href="https://award.ddd.it/project/siti-web/tarot-o-bot">Digital Design Awards</a> â€” <a
                    href="https://thefwa.com/cases/tarot-o-bot">FWA of the day</a>
                </br></br></br>
            </div>

            <div style="display: none;">
                <div>
                    <input id="invitee_email" class="main_text" type="email" placeholder="Your email here">
                </div>

                <div id="p2_buttons">
                    <div id="p2_enter_btn" class="brillo_btn">
                        Press Enter </br>
                        <img src="./includes/images/arrow_left_black.png" class="btn_icon">
                    </div></br>

                    <div id="email_answer_div" class="brillo_btn" style="display:none;">
                        <span id="email_answer_text"></span>
                    </div>

                </div>
            </div>

        </div>


    </div>

</body>

<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-60264431-1', 'auto');
    ga('send', 'pageview');
</script>

<script src="./includes/anims/lottie.js" type="text/javascript"></script>
<script src="./includes/js/particles.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {

        // Firefox 1.0+
        var isFirefox = typeof InstallTrigger !== 'undefined';

        // Safari 3.0+ "[object HTMLElementConstructor]" 
        var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) {
            return p.toString() === "[object SafariRemoteNotification]";
        })(!window['safari'] || (typeof safari !== 'undefined' && safari.pushNotification));

        // Internet Explorer 6-11
        var isIE = /*@cc_on!@*/ false || !!document.documentMode;

        // Chrome 1 - 71
        var isChrome = !!window.chrome && (!!window.chrome.webstore || !!window.chrome.runtime);

        /*
        console.log("firefox:" + isFirefox);
        console.log("chrome:" + isChrome);
        console.log("safari:" + isSafari);
        console.log("IE:" + isIE);*/

        if (isIE) {
            $("#page1 .main_text").text(
                "Sorry, this experience is not available in Internet Explorer, Use another browser please.");
            $("#p1_enter_btn").hide();
            $("#right_link").css("pointer-events", "none");
        }

        var is_mobile = $(window).width() < 1024 ? true : false;

        if (is_mobile) {
            // if in mobile
            particlesJS.load('particles-js', './includes/js/particles_mobile.json', function () { });

        } else {
            run_animation();
            particlesJS.load('particles-js', './includes/js/particles.json', function () { });
            //if not in mobile
        }

        function run_animation() {
            var aspectRatio = $(window).width() / $(window).height();

            var animData = {
                container: document.getElementById('anim_container'),
                renderer: 'svg',
                autoplay: true,
                loop: true,
                rendererSettings: {
                    preserveAspectRatio: 'xMidYMid slice'
                },
                path: './includes/anims/website_page.json'
                //animationData: animationData
            };

            $("#anim_container").css("z-index", 0);
            var anim = bodymovin.loadAnimation(animData);
            //anim.addEventListener('complete', hide_bodymovin);
        }

        function hide_bodymovin() {
            bodymovin.destroy();
            $("#anim_container").css("z-index", -1);
        }

        $("#join").click(function () {
            // æœ¬åœ°ç‰ˆæœ¬ï¼šè·³åˆ°å†…éƒ¨çš„å åœç»“æœé¡µé¢ï¼Œè€Œä¸æ˜¯å¤–éƒ¨ç«™ç‚¹
            window.location = "./prediction/17/index.html";
        });

        $("#p1_enter_btn").hover(function () {
            $(this).css("background-color", "#E6E6E6");
            $(this).css("color", "black");
            $("#p1_enter_btn img").attr('src', "./includes/images/arrow_left_black.png");
        }, function () {
            $(this).css("background-color", "black");
            $(this).css("color", "#E6E6E6");
            $("#p1_enter_btn img").attr('src', "./includes/images/arrow_left_grey.png");
        });

        $("#p2_enter_btn").hover(function () {
            $(this).css("background-color", "black");
            $(this).css("color", "#F15A24");
            $(this).css({
                "border-color": "#F15A24",
                "border-width": "1px",
                "border-style": "solid"
            });
            $("#p2_enter_btn img").attr('src', "./includes/images/arrow_left_orange.png");
        }, function () {
            $(this).css("background-color", "#F15A24");
            $(this).css("color", "black");
            $("#p2_enter_btn img").attr('src', "./includes/images/arrow_left_black.png");
        });


        // æ—¥æœŸé€‰æ‹©å™¨åˆå§‹åŒ–
        function initDatePicker() {
            var currentYear = new Date().getFullYear();
            var startYear = currentYear - 100; // 100å¹´å‰
            var endYear = currentYear;
            
            // åˆå§‹åŒ–å¹´ä»½
            var yearItems = $('#year_items');
            for (var y = endYear; y >= startYear; y--) {
                yearItems.append('<div class="picker-item" data-value="' + y + '">' + y + '</div>');
            }
            
            // åˆå§‹åŒ–æœˆä»½
            var monthItems = $('#month_items');
            for (var m = 1; m <= 12; m++) {
                monthItems.append('<div class="picker-item" data-value="' + m + '">' + m + '</div>');
            }
            
            // åˆå§‹åŒ–æ—¥æœŸï¼ˆé»˜è®¤31å¤©ï¼Œä¼šæ ¹æ®å¹´æœˆåŠ¨æ€æ›´æ–°ï¼‰
            updateDayPicker(31);
            
            // è®¾ç½®é»˜è®¤å€¼ï¼ˆå½“å‰æ—¥æœŸï¼‰
            var today = new Date();
            setPickerValue('year', today.getFullYear());
            setPickerValue('month', today.getMonth() + 1);
            setPickerValue('day', today.getDate());
            updateBirthValue();
            
            // ç»‘å®šæ»‘åŠ¨äº‹ä»¶
            initPickerWheel('year');
            initPickerWheel('month');
            initPickerWheel('day');
        }
        
        function updateDayPicker(maxDays) {
            var dayItems = $('#day_items');
            dayItems.empty();
            for (var d = 1; d <= maxDays; d++) {
                dayItems.append('<div class="picker-item" data-value="' + d + '">' + d + '</div>');
            }
            // é‡æ–°ç»‘å®šæ»‘åŠ¨äº‹ä»¶
            initPickerWheel('day');
            // ç¡®ä¿å½“å‰é€‰ä¸­çš„æ—¥æœŸåœ¨èŒƒå›´å†…
            var currentDay = parseInt($('#day_picker .picker-item.selected').attr('data-value') || '1');
            if (currentDay > maxDays) {
                setPickerValue('day', maxDays);
            } else {
                setPickerValue('day', currentDay);
            }
        }
        
        function getDaysInMonth(year, month) {
            return new Date(year, month, 0).getDate();
        }
        
        function setPickerValue(type, value) {
            var picker = $('#' + type + '_picker');
            var items = picker.find('.picker-item');
            var targetIndex = -1;
            
            items.each(function(index) {
                if (parseInt($(this).attr('data-value')) === value) {
                    targetIndex = index;
                    return false;
                }
            });
            
            if (targetIndex >= 0) {
                var itemHeight = 50;
                var offset = (picker.height() / 2) - (itemHeight / 2) - (targetIndex * itemHeight);
                picker.find('.picker-items').css('transform', 'translateY(' + offset + 'px)');
                
                // æ›´æ–°é€‰ä¸­çŠ¶æ€
                items.removeClass('selected');
                items.eq(targetIndex).addClass('selected');
            }
        }
        
        function getPickerValue(type) {
            var selected = $('#' + type + '_picker .picker-item.selected');
            if (selected.length) {
                return parseInt(selected.attr('data-value'));
            }
            // å¦‚æœæ²¡æœ‰é€‰ä¸­é¡¹ï¼Œè®¡ç®—ä¸­é—´ä½ç½®çš„å€¼
            var picker = $('#' + type + '_picker');
            var items = picker.find('.picker-item');
            var itemHeight = 50;
            var pickerHeight = picker.height();
            var centerY = pickerHeight / 2;
            var transform = picker.find('.picker-items').css('transform');
            var translateY = 0;
            
            if (transform && transform !== 'none') {
                var matrix = transform.match(/matrix.*\((.+)\)/);
                if (matrix) {
                    translateY = parseFloat(matrix[1].split(',')[5] || 0);
                }
            }
            
            var relativeY = centerY - translateY;
            var index = Math.round(relativeY / itemHeight);
            index = Math.max(0, Math.min(index, items.length - 1));
            
            return parseInt(items.eq(index).attr('data-value'));
        }
        
        function updateBirthValue() {
            var year = getPickerValue('year');
            var month = getPickerValue('month');
            var day = getPickerValue('day');
            
            // æ›´æ–°æ—¥æœŸé€‰é¡¹ï¼ˆæ ¹æ®å¹´æœˆï¼‰
            var maxDays = getDaysInMonth(year, month);
            var currentDayItems = $('#day_items .picker-item').length;
            if (currentDayItems !== maxDays) {
                updateDayPicker(maxDays);
            }
            
            // ç¡®ä¿æ—¥æœŸåœ¨æœ‰æ•ˆèŒƒå›´å†…
            if (day > maxDays) {
                setPickerValue('day', maxDays);
                day = maxDays;
            }
            
            // æ ¼å¼åŒ–ä¸º YYYY-MM-DD
            var monthStr = month < 10 ? '0' + month : month;
            var dayStr = day < 10 ? '0' + day : day;
            $('#user_birth').val(year + '-' + monthStr + '-' + dayStr);
        }
        
        function initPickerWheel(type) {
            var picker = $('#' + type + '_picker');
            var items = picker.find('.picker-items');
            var isDragging = false;
            var startY = 0;
            var startTranslate = 0;
            var itemHeight = 50;
            var pickerHeight = picker.height();
            var minTranslate = 0;
            var maxTranslate = 0;
            
            function updateBounds() {
                var itemCount = items.find('.picker-item').length;
                var totalHeight = itemCount * itemHeight;
                var centerOffset = (pickerHeight / 2) - (itemHeight / 2);
                minTranslate = pickerHeight - totalHeight + centerOffset;
                maxTranslate = centerOffset;
            }
            
            updateBounds();
            
            function snapToNearest() {
                var currentTransform = items.css('transform');
                var translateY = 0;
                
                if (currentTransform && currentTransform !== 'none') {
                    var matrix = currentTransform.match(/matrix.*\((.+)\)/);
                    if (matrix) {
                        translateY = parseFloat(matrix[1].split(',')[5] || 0);
                    }
                }
                
                var centerY = pickerHeight / 2;
                var relativeY = centerY - translateY;
                var index = Math.round(relativeY / itemHeight);
                var itemCount = items.find('.picker-item').length;
                index = Math.max(0, Math.min(index, itemCount - 1));
                
                var targetTranslate = (pickerHeight / 2) - (itemHeight / 2) - (index * itemHeight);
                targetTranslate = Math.max(minTranslate, Math.min(maxTranslate, targetTranslate));
                
                items.css('transition', 'transform 0.3s ease-out');
                items.css('transform', 'translateY(' + targetTranslate + 'px)');
                
                // æ›´æ–°é€‰ä¸­çŠ¶æ€
                setTimeout(function() {
                    items.find('.picker-item').removeClass('selected');
                    items.find('.picker-item').eq(index).addClass('selected');
                    
                    // æ›´æ–°éšè—è¾“å…¥æ¡†çš„å€¼
                    if (type === 'year' || type === 'month') {
                        updateDayPicker(getDaysInMonth(getPickerValue('year'), getPickerValue('month')));
                    }
                    updateBirthValue();
                }, 300);
            }
            
            // é¼ æ ‡äº‹ä»¶
            picker.on('mousedown', function(e) {
                isDragging = true;
                startY = e.clientY;
                var currentTransform = items.css('transform');
                if (currentTransform && currentTransform !== 'none') {
                    var matrix = currentTransform.match(/matrix.*\((.+)\)/);
                    if (matrix) {
                        startTranslate = parseFloat(matrix[1].split(',')[5] || 0);
                    }
                }
                items.css('transition', 'none');
                e.preventDefault();
            });
            
            $(document).on('mousemove', function(e) {
                if (!isDragging) return;
                var deltaY = e.clientY - startY;
                var newTranslate = startTranslate + deltaY;
                newTranslate = Math.max(minTranslate, Math.min(maxTranslate, newTranslate));
                items.css('transform', 'translateY(' + newTranslate + 'px)');
            });
            
            $(document).on('mouseup', function() {
                if (isDragging) {
                    isDragging = false;
                    snapToNearest();
                }
            });
            
            // è§¦æ‘¸äº‹ä»¶
            picker.on('touchstart', function(e) {
                isDragging = true;
                startY = e.touches[0].clientY;
                var currentTransform = items.css('transform');
                if (currentTransform && currentTransform !== 'none') {
                    var matrix = currentTransform.match(/matrix.*\((.+)\)/);
                    if (matrix) {
                        startTranslate = parseFloat(matrix[1].split(',')[5] || 0);
                    }
                }
                items.css('transition', 'none');
                e.preventDefault();
            });
            
            $(document).on('touchmove', function(e) {
                if (!isDragging) return;
                var deltaY = e.touches[0].clientY - startY;
                var newTranslate = startTranslate + deltaY;
                newTranslate = Math.max(minTranslate, Math.min(maxTranslate, newTranslate));
                items.css('transform', 'translateY(' + newTranslate + 'px)');
                e.preventDefault();
            });
            
            $(document).on('touchend', function() {
                if (isDragging) {
                    isDragging = false;
                    snapToNearest();
                }
            });
            
            // æ»šè½®äº‹ä»¶
            picker.on('wheel', function(e) {
                e.preventDefault();
                var delta = e.originalEvent.deltaY;
                var currentTransform = items.css('transform');
                var translateY = 0;
                
                if (currentTransform && currentTransform !== 'none') {
                    var matrix = currentTransform.match(/matrix.*\((.+)\)/);
                    if (matrix) {
                        translateY = parseFloat(matrix[1].split(',')[5] || 0);
                    }
                }
                
                var newTranslate = translateY + delta * 0.5;
                newTranslate = Math.max(minTranslate, Math.min(maxTranslate, newTranslate));
                
                items.css('transition', 'transform 0.1s ease-out');
                items.css('transform', 'translateY(' + newTranslate + 'px)');
                
                clearTimeout(picker.data('snapTimeout'));
                picker.data('snapTimeout', setTimeout(snapToNearest, 150));
            });
        }
        
        // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨
        initDatePicker();
        
        // æ˜¾ç¤ºè¾“å…¥è¡¨å•
        $("#p1_enter_btn").click(function () {
            $("#page1").hide();
            $("#page0").show();
        });

        // æäº¤è¡¨å•å¹¶å¼€å§‹å åœæµç¨‹
        $("#p0_enter_btn").click(function () {
            var userName = $("#user_name").val().trim();
            var userBirth = $("#user_birth").val();
            var userQuestion = $("#user_question").val().trim();

            if (!userName || !userBirth || !userQuestion) {
                alert("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯");
                return;
            }

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            $("#p0_loading").show();
            $("#p0_enter_btn").hide();

            // è°ƒç”¨åç«¯ API é¢„æŠ½ç‰Œ
            fetch("/api/precards")
                .then(res => res.json())
                .then(data => {
                    // ä¿å­˜ç”¨æˆ·ä¿¡æ¯å’Œé¢„æŠ½ç‰Œåˆ° localStorageï¼ˆç¡®ä¿æ•°æ®æ­£ç¡®ï¼‰
                    var userData = {
                        name: userName,
                        birth: userBirth,
                        question: userQuestion,
                        preparedCards: data.cards || []
                    };
                    
                    // è°ƒè¯•ï¼šæ‰“å°ä¿å­˜çš„æ•°æ®
                    console.log("ä¿å­˜çš„ç”¨æˆ·æ•°æ®:", userData);
                    localStorage.setItem("tarotUserData", JSON.stringify(userData));
                    
                    // éªŒè¯ä¿å­˜æ˜¯å¦æˆåŠŸ
                    var saved = JSON.parse(localStorage.getItem("tarotUserData"));
                    console.log("éªŒè¯ä¿å­˜çš„æ•°æ®:", saved);
                    
                    // è·³è½¬åˆ°ç»“æœé¡µ
                    window.location = "./prediction/17/index.html";
                })
                .catch(err => {
                    console.error("é¢„æŠ½ç‰Œå¤±è´¥:", err);
                    alert("è·å–å¡”ç½—ç‰Œå¤±è´¥ï¼Œè¯·é‡è¯•");
                    $("#p0_loading").hide();
                    $("#p0_enter_btn").show();
                });
        });


        $(document).keypress(function (e) {
            var keycode = (e.keyCode ? e.keyCode : e.which);
            if (keycode == '13') {
                event.preventDefault();
                // Trigger the button element with a click
                $("#p1_enter_btn").click();
            }
        });

        function validateEmail(email) {
            var re = /\S+@\S+\.\S+/;
            return re.test(email);
        }

        $("#p2_enter_btn").click(function () {
            var invitee_email = $("#invitee_email").val();
            var datastring = "email=" + invitee_email;

            if (validateEmail(invitee_email)) {

                $.ajax({
                    type: "POST",
                    url: "./email.php",
                    data: datastring,
                    /*dataType: "json",*/
                    success: function (data) {
                        console.log(data);

                        if (data == "success") {
                            $("#email_answer_text").text("Email Sent ğŸ™‚");
                            $("#email_answer_div").show();
                            setTimeout(function () {
                                $("#email_answer_div").fadeOut("slow");
                            }, 1000);
                        } else {
                            console.log(
                                "There was a server side error , could not sent the email"
                            );
                        }

                    },
                    error: function (xhr, textStatus, errorThrown) {
                        console.log('Request Status: ' + xhr.status + ' Status Text: ' + xhr
                            .statusText + ' & ' + xhr.responseText + ' textStatus: ' +
                            textStatus + ' errorThrown ' + errorThrown);
                    }
                });
            } else {
                // email is not valid
                $("#email_answer_text").text("Email is not valid!");
                $("#email_answer_div").css("background", "red")
                $("#email_answer_div").show();
                setTimeout(function () {
                    $("#email_answer_div").fadeOut("slow");
                }, 1000);
            }

            $(".icons").click(function () {
                location.reload();
            });

            $("#title_colored").click(function () {
                location.reload();
            });


        });

    });
</script>

</html>