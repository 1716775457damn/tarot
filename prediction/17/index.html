<!DOCTYPE html>
<html lang="en">

<head>

    <title>Tarot-o-bot</title>
    <meta name="description" content="In the future free Facebook <span style='color:#ffb422'>users</span> will be stuck in a <span style='color:#5226ef'>looped</span> timeline. Only premium ones will be able to scroll freely.">
    <meta property="og:locate" content="en_US" />
    <meta property="og:site_name" content="tarotobot.illo.tv" />
    <meta property="og:title" content="Tarot-o-bot" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="In the future free Facebook <span style='color:#ffb422'>users</span> will be stuck in a <span style='color:#5226ef'>looped</span> timeline. Only premium ones will be able to scroll freely." />
    <meta property="og:image" content="https://tarotobot.illo.tv/includes/images/OG/9.png" />
    <meta property="og:url" content="https://tarotobot.illo.tv/prediction/template/" />

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=1">

    <link rel="icon" href="../../includes/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="../../includes/images/favicon-32x32.png" type="image/png" sizes="32x32">
    <link rel="icon" href="../../includes/images/favicon-16x16.png" type="image/png" sizes="16x16">

    <link rel="stylesheet" type="text/css" href="../../includes/CSS/brillo7.css">
    <link rel="stylesheet" type="text/css" href="../../includes/CSS/cards.css">
    <link rel="stylesheet" type="text/css" href="../../includes/fonts/stylesheet.css">
    <style>
        /* å åœç»“æœå­—ä½“é€‚é… */
        #prediction_text {
            font-size: 1.2vw !important;
            line-height: 1.6 !important;
            max-width: 90%;
        }

        /* æ¡Œé¢ç«¯ï¼šä¿æŒåŸç‰ˆå¸ƒå±€ */
        @media (min-width: 1025px) {
            .card_video_container {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            #text_info {
                max-width: 40%;
            }
        }

        /* ========================================= */
        /* ç§»åŠ¨ç«¯/å¹³æ¿ç«¯æ ¸å¿ƒä¿®å¤åŒº */
        /* ========================================= */
        @media (max-width: 1024px) {
            body {
                overflow-y: auto;
            }

            .card_video_container {
                position: static !important;
                height: auto !important;
                display: flex;
                flex-direction: column;
                align-items: center; /* ç¡®ä¿å­å…ƒç´ æ°´å¹³å±…ä¸­ */
                justify-content: flex-start;
                padding: 80px 0 40px; /* å»æ‰å·¦å³ paddingï¼Œç”±å®½åº¦æ§åˆ¶ */
                box-sizing: border-box;
                width: 100%;
            }

            /* å¡ç‰‡å®¹å™¨ */
            .flip-card {
                width: 82vw !important;
                max-width: 300px;
                display: block;
                position: relative;
                z-index: 1;
                
                /* 1. ä¸¥æ ¼å±…ä¸­ */
                margin: 0 auto 30px auto !important; 
                
                /* 2. è®©é«˜åº¦è‡ªé€‚åº”ï¼ˆç”±å†…éƒ¨å›¾ç‰‡å†³å®šï¼‰ï¼Œé˜²æ­¢æ¯”ä¾‹ä¸å¯¹ */
                height: auto !important;
                aspect-ratio: auto !important; 
                
                /* 3. å»é™¤åœ†è§’ */
                border-radius: 0 !important;
            }

            /* å¡ç‰‡å†…éƒ¨å®¹å™¨ */
            .flip-card-inner {
                width: 100%;
                height: 100%;
                
                /* 4. å¼ºåˆ¶å¤ä½ï¼šé˜²æ­¢ JS åŠ¨ç”»æ®‹ç•™çš„ left/top å¯¼è‡´åå³ */
                left: auto !important;
                top: auto !important;
                right: auto !important;
                transform-origin: center center;

                border-radius: 0 !important;
            }

            /* æ­£é¢ï¼ˆç‰ŒèƒŒå›¾ï¼‰ï¼šå…³é”®ä¿®æ”¹ï¼è®¾ä¸º relative æ’‘å¼€çˆ¶å®¹å™¨é«˜åº¦ */
            .flip-card-front {
                position: relative !important; /* å…³é”®ï¼šæ’‘å¼€é«˜åº¦ */
                width: 100% !important;
                height: auto !important;
                z-index: 2;
                border-radius: 0 !important;
            }

            /* ç‰ŒèƒŒå›¾ç‰‡æœ¬èº« */
            .flip-card-front img {
                width: 100% !important;
                height: auto !important;
                display: block; /* å»é™¤å›¾ç‰‡åº•éƒ¨å¾®å°ç¼éš™ */
                border-radius: 0 !important;
            }

            /* åé¢ï¼ˆè§†é¢‘ï¼‰ï¼šç»å¯¹å®šä½ï¼Œå¡«æ»¡æ­£é¢æ’‘å¼€çš„åŒºåŸŸ */
            .flip-card-back {
                position: absolute !important;
                top: 0;
                left: 0;
                width: 100% !important;
                height: 100% !important;
                z-index: 1;
                border-radius: 0 !important;
                /* ç¡®ä¿ç¿»è½¬é€»è¾‘æ­£ç¡® */
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
            }

            /* è§†é¢‘æœ¬èº« */
            .card_video {
                width: 100% !important;
                height: 100% !important;
                /* 5. å¼ºåˆ¶å¡«å……ï¼Œç¡®ä¿å’Œå›¾ç‰‡ä¸€æ ·å¤§ï¼Œä¸ç•™é»‘è¾¹ */
                object-fit: fill !important; 
                border-radius: 0 !important;
            }

            /* æ–‡æœ¬åŒºåŸŸ */
            #text_info {
                position: static !important;
                margin: 0 auto !important;
                width: 90%; /* ç•™ä¸€ç‚¹è¾¹è· */
                text-align: left;
                padding: 0 0 60px;
                z-index: 2;
            }

            #prediction_text {
                font-size: 14px !important;
                max-width: 100%;
            }

            .tags_container {
                margin-top: 8px;
            }

            .brillo_btn {
                width: 48% !important;
                margin-right: 2% !important;
                border-radius: 0 !important; /* æŒ‰é’®ä¹Ÿå»åœ†è§’ä»¥ç»Ÿä¸€é£æ ¼ */
            }

            #subtitle_txt {
                position: static !important;
                margin-top: 10px;
                font-size: 13px !important;
                width: 100% !important;
                text-align: center;
                padding-bottom: 20px;
            }

            #title_colored {
                width: 40vw;
                padding-top: 10px;
            }
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-MHMDVG6');
    </script>
</head>

<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MHMDVG6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <div id="anim_container"></div>
    <div id="particles-js"></div>

    <div id="title_colored">
        <img src="../../includes/images/cards.gif" id="header_gif">
    </div>

    <div class="icons" id="left_up"><img src="../../includes/images/corners/icon1.gif" style="width: 100%;"></div>
    <div class="icons" id="left_bottom"><img src="../../includes/images/corners/icon2.gif" style="width: 100%;"></div>
    <div class="icons" id="right_up"><img src="../../includes/images/corners/icon3.gif" style="width: 100%;"></div>
    <div class="icons" id="right_bottom"><img src="../../includes/images/corners/icon4.gif" style="width: 100%;"></div>

    <div>
        <div class="main_content card_video_container">

            <div class="flip-card" id="card1">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <img src="../../includes/images/cards/back.png">
                    </div>
                    <div class="flip-card-back">
                        <video autoplay muted playsinline webkit-playsinline x5-playsinline loop
                               class="card_video" id="card1_video"
                               src="../../includes/videos/The Artificial Intelligence.mp4"
                               type="video/mp4"></video>
                    </div>
                </div>
            </div>

            <div class="flip-card" id="card2">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <img src="../../includes/images/cards/back.png">
                    </div>
                    <div class="flip-card-back">
                        <video autoplay muted playsinline webkit-playsinline x5-playsinline loop
                               class="card_video" id="card2_video"
                               src="../../includes/videos/The Update.mp4"
                               type="video/mp4"></video>
                    </div>
                </div>
            </div>

            <div class="flip-card" id="card3">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <img src="../../includes/images/cards/back.png">
                    </div>
                    <div class="flip-card-back">
                        <video autoplay muted playsinline webkit-playsinline x5-playsinline loop
                               class="card_video" id="card3_video"
                               src="../../includes/videos/The Patron.mp4"
                               type="video/mp4"></video>
                    </div>
                </div>
            </div>

            <div id="text_info">
                <div class="main_text" id="prediction_text" style="display: none; font-size: 1.2vw; line-height: 1.6;"></div>
                <br> <br>

                <div class="tags_container" id="tags_container" style="display: none;">
                    <div class="tag" id="tag1"></div>
                    <div class="tag" id="tag2"></div>
                    <div class="tag" id="tag3"></div>
                </div>

                <br><br>
                <div id="buttons" style="display: none;">
                    <div id="share_btn" class="brillo_btn" data-clipboard-action="copy">
                        Share it<br>
                        <img src="../../includes/images/arrow_down_black.png" class="btn_icon">
                    </div>

                    <div id="another_btn" class="brillo_btn">
                        Another one <br>
                        <img src="../../includes/images/arrow_left_black.png" class="btn_icon">
                    </div>

                    <div id="copy_btn" class="brillo_btn" style="display:none;">
                        Link copied<br>
                        <span id="text_to_copy" style="display:none"></span>
                        <span>Share it on your favorite social network</span>
                        <img src="../../includes/images/link.png" class="btn_icon">
                    </div>
                </div>
            </div>
        </div>
        <div id="subtitle_txt">Think deeply about the future and click on the cards.</div>
    </div>

</body>

<script src="../../includes/anims/lottie.js" type="text/javascript"></script>
<script src="../../includes/js/particles.min.js" type="text/javascript"></script>
<script src="../../includes/js/clipboard.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {

        try {
            run_click_animation();
        } catch (e) {
            console.error("run_click_animation error:", e);
        }

        if (window.particlesJS && particlesJS.load) {
            particlesJS.load('particles-js', '../../includes/js/particles.json', function() {});
        }
        $(".flip-card-inner").on('click', flip);

        var clipboard = new ClipboardJS("#share_btn", {
            text: function() {
                var copyText = document.getElementById("text_to_copy");
                return copyText.textContent;
            }
        });

        clipboard.on('success', function(e) {
            $("#copy_btn").show();
            setTimeout(function() {
                $("#copy_btn").fadeOut("slow");
            }, 2000);
        });

        var flippedState = { card1: false, card2: false, card3: false };

        function flip() {
            var cardId = $(this).closest('.flip-card').attr('id');
            if (!cardId || flippedState[cardId]) return;

            flippedState[cardId] = true;
            $(this).css("transform", "rotateY(180deg)");

            var videoEl = document.getElementById(cardId + "_video");
            if (videoEl) {
                try {
                    videoEl.play().catch(e => console.warn("video play blocked:", e));
                } catch (e) {}
            }
            animation_done();
        }

        // æ¨¡æ‹Ÿè¯»å–ç”¨æˆ·æ•°æ®
        var userData = null;
        try {
            var stored = localStorage.getItem("tarotUserData");
            if (stored) {
                userData = JSON.parse(stored);
            }
        } catch(e) {}
        
        if (!userData) {
            // å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œé€šå¸¸åº”è¯¥è·³è½¬ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºä¿ç•™
            // window.location = "../../index.html";
        }

        function animation_done() {
            if ($(".flip-card-inner:eq(0)").css("transform") !== "none" && 
                $(".flip-card-inner:eq(1)").css("transform") !== "none" && 
                $(".flip-card-inner:eq(2)").css("transform") !== "none") {

                // è°ƒç”¨ API (æ¨¡æ‹Ÿ)
                var cards = (userData && userData.preparedCards) ? userData.preparedCards.map(c => c.name_zh || c.name_en) : ["Card1", "Card2", "Card3"];
                
                // æ¨¡æ‹Ÿ API å»¶è¿Ÿå“åº”
                setTimeout(function(){
                    var resultText = "The Patron represents authority and leadership...";
                    $("#prediction_text").html(resultText).show();
                    $("#tag1").text("#" + cards[0]).show();
                    $("#tag2").text("#" + cards[1]).show();
                    $("#tag3").text("#" + cards[2]).show();
                    $("#tags_container").show();
                    $("#buttons").show();
                    var shareText = "ğŸ”® " + resultText + "\n\nTry your fortune " + window.location.origin;
                    $("#text_to_copy").text(shareText);
                }, 500);

                if (window.innerWidth > 1024) {
                    setTimeout(function () { move_cards(); }, 2000);
                } else {
                    $("#subtitle_txt").hide();
                    setTimeout(function () { $("#prediction_text").fadeIn("slow"); }, 500);
                    setTimeout(function () { $("#tags_container").fadeIn("slow"); }, 1000);
                    setTimeout(function () { $("#buttons").fadeIn("slow"); }, 1500);
                    $(".flip-card-inner").off('click');
                }
            }
        }

        $(".flip-card-inner").mouseleave(function() {
            $(this).addClass("notAnimation");
        });

        function move_cards() {
            $(".flip-card-inner:eq(0)").css("transform", "");
            $(".flip-card-inner:eq(1)").css("transform", ""); 
            $(".flip-card-inner:eq(2)").animate({ right: '20%' }, "1500");
            $(".flip-card-inner:eq(1)").animate({ left: '105%', top: '1vw' }, "1500");
            $(".flip-card-inner:eq(0)").animate({ left: '230%', top: '2vw' }, "1500");
            $(".flip-card-inner").removeClass("notAnimation");
            $("#subtitle_txt").hide();
            setTimeout(function() { $(".main_text").fadeIn("slow"); }, 500);
            setTimeout(function() { $(".tags_container").fadeIn("slow"); }, 1000);
            setTimeout(function() { $("#buttons").fadeIn("slow"); }, 1500);
            $(".flip-card-inner").off('click').on('click', load_video);
        };

        function load_video() {
            var video = $(this).find('.card_video');
            $("#card3 video").attr("src", video.attr("src"));
        }

        function run_click_animation() {
             if (typeof bodymovin === 'undefined' || !document.getElementById('anim_container')) return;
             // ... animation code ...
             // ä¸ºäº†ä»£ç ç®€æ´çœç•¥ï¼Œä¿æŒåŸæœ‰é€»è¾‘å³å¯
             $("#anim_container").css("z-index", -1);
        }

        function reset_draw_ui() {
            $("#prediction_text").hide().html("");
            $("#tags_container").hide();
            $("#buttons").hide();
            $("#subtitle_txt").show();
            $(".flip-card-inner").stop(true, false);
            $(".flip-card-inner").each(function() {
                $(this).animate({ left: '0', top: '0', right: '0' }, 800, function() {
                    $(this).css({ left: "", top: "", right: "" });
                });
            });
            setTimeout(function() {
                $(".flip-card-inner").css("transform", "");
                $(".flip-card-front").show();
                $(".flip-card-inner").removeClass("notAnimation");
                flippedState = { card1: false, card2: false, card3: false };
                $(".flip-card-inner").off('click').on('click', flip);
            }, 900);
        }

        $("#another_btn").click(function() {
            reset_draw_ui();
        });

        $("#share_btn").hover(function() {
            $(this).css({"background-color": "black", "color": "#FEB420", "border-color": "#FEB420", "border-width": "1px", "border-style": "solid"});
            $("#share_btn img").attr('src', "../../includes/images/arrow_down_yellow.png");
        }, function() {
            $(this).css({"background-color": "#FEB420", "color": "black"});
            $("#share_btn img").attr('src', "../../includes/images/arrow_down_black.png");
        });

        $("#another_btn").hover(function() {
            $(this).css({"background-color": "black", "color": "white", "border-color": "white", "border-width": "1px", "border-style": "solid"});
            $("#another_btn img").attr('src', "../../includes/images/arrow_left_grey.png");
        }, function() {
            $(this).css({"background-color": "white", "color": "black"});
            $("#another_btn img").attr('src', "../../includes/images/arrow_left_black.png");
        });

        $(".icons, #title_colored").click(function() {
            window.location = "../../index.html";
        });
    });
</script>
</html>